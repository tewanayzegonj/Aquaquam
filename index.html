<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>EOTC Aququam Library</title>
    <meta name="description" content="Ethiopian Orthodox Tewahedo Church Aququam Audio Library" />
    <meta name="theme-color" content="#10b981" />
    <meta name="mobile-web-app-capable" content="yes" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&display=swap" rel="stylesheet">

    <link rel="icon" type="image/svg+xml" href="/pwa-icon.svg" />
    <link rel="apple-touch-icon" href="/pwa-icon.svg" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <script>
      // Intercept and mock Vite's WebSocket to prevent connection errors
      (function() {
        const OriginalWebSocket = window.WebSocket;
        
        class DummyWebSocket {
          constructor(url, protocols) {
            this.url = url;
            this.protocols = protocols;
            this.readyState = 0; // CONNECTING
            this.onopen = null;
            this.onmessage = null;
            this.onclose = null;
            this.onerror = null;
            
            // Simulate successful connection to keep Vite client happy
            setTimeout(() => {
              this.readyState = 1; // OPEN
              if (typeof this.onopen === 'function') {
                this.onopen(new Event('open'));
              }
            }, 100);
          }
          send() {}
          close() {
            this.readyState = 3; // CLOSED
            if (typeof this.onclose === 'function') {
              this.onclose(new Event('close'));
            }
          }
          addEventListener(type, listener) {
            this['on' + type] = listener;
          }
          removeEventListener(type, listener) {
            if (this['on' + type] === listener) {
              this['on' + type] = null;
            }
          }
          dispatchEvent() { return true; }
        }

        window.WebSocket = function(url, protocols) {
          if (protocols === 'vite-hmr' || (typeof url === 'string' && url.includes('vite'))) {
            return new DummyWebSocket(url, protocols);
          }
          return new OriginalWebSocket(url, protocols);
        };
        
        // Copy static properties
        window.WebSocket.CONNECTING = OriginalWebSocket.CONNECTING;
        window.WebSocket.OPEN = OriginalWebSocket.OPEN;
        window.WebSocket.CLOSING = OriginalWebSocket.CLOSING;
        window.WebSocket.CLOSED = OriginalWebSocket.CLOSED;
        window.WebSocket.prototype = OriginalWebSocket.prototype;
      })();
    </script>
    <link rel="stylesheet" href="/index.css">
  </head>
  <body class="bg-donezo-bg dark:bg-donezo-dark text-slate-900 dark:text-slate-100 font-sans">
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>